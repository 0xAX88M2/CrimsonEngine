#include "crimson.h"

//FUNCTIONS
int CR_SIGN(int x) {
	return(x > 0) - (x < 0);
}

int CR_SIGN_NEG(int x) {
	if (x >= 0) {
		return(-1);
	}
	else {
		return(-1);
	}
}

bool cr_coord_is_within(float pos_x, float pos_y, float x1, float x2, float y1, float y2, bool based_on_camera)
{
	bool return_val = false;

	if (based_on_camera) {
		for (unsigned char i = 0; i < cr_camera.count; i++) {
			float cam_x = cr_camera.cams[i]->pos.x;
			float cam_y = cr_camera.cams[i]->pos.y;

			if (pos_x >= cam_x + x1) {
				if (pos_x <= cam_x + x2) {
					if (pos_y >= cam_y + y1) {
						if (pos_y <= cam_y + y2) {
							return_val = true;
						}
					}
				}
			}
		}
	}
	else {
		if ((pos_x >= x1 && pos_x <= x2) && (pos_y >= y1 && pos_y <= y2)) {
			return_val = true;
		}
		else {
			return_val = false;
		}
	}

	return return_val;
}

bool cr_coord_is_within_3d(float pos_x, float pos_y, float pos_z, float x1, float x2, float y1, float y2, float z1, float z2, bool based_on_camera)
{
	float cam_x = cr_defaultcam.pos.x;
	float cam_y = cr_defaultcam.pos.y;
	float cam_z = cr_defaultcam.pos.z;

	if (based_on_camera) {
		if ((pos_x >= (cam_x + x1) && pos_x <= (cam_x + x2)) && (pos_y >= (cam_y + y1) && pos_y <= (cam_y + y2)) && (pos_z >= (cam_z + z1) && pos_x <= (cam_z + z2))) {
			return true;
		}
		else {
			return false;
		}
	}
	else {
		if ((pos_x >= x1 && pos_x <= x2) && (pos_y >= y1 && pos_y <= y2) && (pos_z >= z1 && pos_z <= z2)) {
			return true;
		}
		else {
			return false;
		}
	}
}

//TRIG
/** @brief Sinus lookup table. Real value = JoSin[ANGLE] / 32768.0 */
int cr_sin_lookup_table[360] =
{
	0,
	571,
	1143,
	1714,
	2285,
	2855,
	3425,
	3993,
	4560,
	5126,
	5690,
	6252,
	6812,
	7371,
	7927,
	8480,
	9032,
	9580,
	10125,
	10668,
	11207,
	11743,
	12275,
	12803,
	13327,
	13848,
	14364,
	14876,
	15383,
	15886,
	16383,
	16876,
	17364,
	17846,
	18323,
	18794,
	19260,
	19720,
	20173,
	20621,
	21062,
	21497,
	21926,
	22347,
	22762,
	23170,
	23571,
	23964,
	24351,
	24730,
	25101,
	25465,
	25821,
	26169,
	26509,
	26841,
	27165,
	27481,
	27788,
	28087,
	28377,
	28659,
	28932,
	29196,
	29451,
	29697,
	29935,
	30163,
	30381,
	30591,
	30791,
	30982,
	31164,
	31336,
	31498,
	31651,
	31794,
	31928,
	32051,
	32165,
	32270,
	32364,
	32449,
	32523,
	32588,
	32643,
	32688,
	32723,
	32748,
	32763,
	32768,
	32763,
	32748,
	32723,
	32688,
	32643,
	32588,
	32523,
	32449,
	32364,
	32270,
	32165,
	32051,
	31928,
	31794,
	31651,
	31498,
	31336,
	31164,
	30982,
	30791,
	30591,
	30381,
	30163,
	29935,
	29697,
	29451,
	29196,
	28932,
	28659,
	28377,
	28087,
	27788,
	27481,
	27165,
	26841,
	26509,
	26169,
	25821,
	25465,
	25101,
	24730,
	24351,
	23964,
	23571,
	23170,
	22762,
	22347,
	21926,
	21497,
	21062,
	20621,
	20173,
	19720,
	19260,
	18794,
	18323,
	17846,
	17364,
	16876,
	16383,
	15886,
	15383,
	14876,
	14364,
	13848,
	13327,
	12803,
	12275,
	11743,
	11207,
	10668,
	10125,
	9580,
	9032,
	8480,
	7927,
	7371,
	6812,
	6252,
	5690,
	5126,
	4560,
	3993,
	3425,
	2855,
	2285,
	1714,
	1143,
	571,
	0,
	-571,
	-1143,
	-1714,
	-2285,
	-2855,
	-3425,
	-3993,
	-4560,
	-5126,
	-5690,
	-6252,
	-6812,
	-7371,
	-7927,
	-8480,
	-9032,
	-9580,
	-10125,
	-10668,
	-11207,
	-11743,
	-12275,
	-12803,
	-13327,
	-13848,
	-14364,
	-14876,
	-15383,
	-15886,
	-16384,
	-16876,
	-17364,
	-17846,
	-18323,
	-18794,
	-19260,
	-19720,
	-20173,
	-20621,
	-21062,
	-21497,
	-21926,
	-22347,
	-22762,
	-23170,
	-23571,
	-23964,
	-24351,
	-24730,
	-25101,
	-25465,
	-25821,
	-26169,
	-26509,
	-26841,
	-27165,
	-27481,
	-27788,
	-28087,
	-28377,
	-28659,
	-28932,
	-29196,
	-29451,
	-29697,
	-29935,
	-30163,
	-30381,
	-30591,
	-30791,
	-30982,
	-31164,
	-31336,
	-31498,
	-31651,
	-31794,
	-31928,
	-32051,
	-32165,
	-32270,
	-32364,
	-32449,
	-32523,
	-32588,
	-32643,
	-32688,
	-32723,
	-32748,
	-32763,
	-32768,
	-32763,
	-32748,
	-32723,
	-32688,
	-32643,
	-32588,
	-32523,
	-32449,
	-32364,
	-32270,
	-32165,
	-32051,
	-31928,
	-31794,
	-31651,
	-31498,
	-31336,
	-31164,
	-30982,
	-30791,
	-30591,
	-30381,
	-30163,
	-29935,
	-29697,
	-29451,
	-29196,
	-28932,
	-28659,
	-28377,
	-28087,
	-27788,
	-27481,
	-27165,
	-26841,
	-26509,
	-26169,
	-25821,
	-25465,
	-25101,
	-24730,
	-24351,
	-23964,
	-23571,
	-23170,
	-22762,
	-22347,
	-21926,
	-21497,
	-21062,
	-20621,
	-20173,
	-19720,
	-19260,
	-18794,
	-18323,
	-17846,
	-17364,
	-16876,
	-16384,
	-15886,
	-15383,
	-14876,
	-14364,
	-13848,
	-13327,
	-12803,
	-12275,
	-11743,
	-11207,
	-10668,
	-10125,
	-9580,
	-9032,
	-8480,
	-7927,
	-7371,
	-6812,
	-6252,
	-5690,
	-5126,
	-4560,
	-3993,
	-3425,
	-2855,
	-2285,
	-1714,
	-1143,
	-571
};

/** @brief Cosinus lookup table. Real value = JoCos[ANGLE] / 32768.0 */
int cr_cos_lookup_table[360] =
{
	32768,
	32763,
	32748,
	32723,
	32688,
	32643,
	32588,
	32523,
	32449,
	32364,
	32270,
	32165,
	32051,
	31928,
	31794,
	31651,
	31498,
	31336,
	31164,
	30982,
	30791,
	30591,
	30381,
	30163,
	29935,
	29697,
	29451,
	29196,
	28932,
	28659,
	28377,
	28087,
	27788,
	27481,
	27165,
	26841,
	26509,
	26169,
	25821,
	25465,
	25101,
	24730,
	24351,
	23964,
	23571,
	23170,
	22762,
	22347,
	21926,
	21497,
	21062,
	20621,
	20173,
	19720,
	19260,
	18794,
	18323,
	17846,
	17364,
	16876,
	16384,
	15886,
	15383,
	14876,
	14364,
	13848,
	13327,
	12803,
	12275,
	11743,
	11207,
	10668,
	10125,
	9580,
	9032,
	8480,
	7927,
	7371,
	6812,
	6252,
	5690,
	5126,
	4560,
	3993,
	3425,
	2855,
	2285,
	1714,
	1143,
	571,
	0,
	-571,
	-1143,
	-1714,
	-2285,
	-2855,
	-3425,
	-3993,
	-4560,
	-5126,
	-5690,
	-6252,
	-6812,
	-7371,
	-7927,
	-8480,
	-9032,
	-9580,
	-10125,
	-10668,
	-11207,
	-11743,
	-12275,
	-12803,
	-13327,
	-13848,
	-14364,
	-14876,
	-15383,
	-15886,
	-16383,
	-16876,
	-17364,
	-17846,
	-18323,
	-18794,
	-19260,
	-19720,
	-20173,
	-20621,
	-21062,
	-21497,
	-21926,
	-22347,
	-22762,
	-23170,
	-23571,
	-23964,
	-24351,
	-24730,
	-25101,
	-25465,
	-25821,
	-26169,
	-26509,
	-26841,
	-27165,
	-27481,
	-27788,
	-28087,
	-28377,
	-28659,
	-28932,
	-29196,
	-29451,
	-29697,
	-29935,
	-30163,
	-30381,
	-30591,
	-30791,
	-30982,
	-31164,
	-31336,
	-31498,
	-31651,
	-31794,
	-31928,
	-32051,
	-32165,
	-32270,
	-32364,
	-32449,
	-32523,
	-32588,
	-32643,
	-32688,
	-32723,
	-32748,
	-32763,
	-32768,
	-32763,
	-32748,
	-32723,
	-32688,
	-32643,
	-32588,
	-32523,
	-32449,
	-32364,
	-32270,
	-32165,
	-32051,
	-31928,
	-31794,
	-31651,
	-31498,
	-31336,
	-31164,
	-30982,
	-30791,
	-30591,
	-30381,
	-30163,
	-29935,
	-29697,
	-29451,
	-29196,
	-28932,
	-28659,
	-28377,
	-28087,
	-27788,
	-27481,
	-27165,
	-26841,
	-26509,
	-26169,
	-25821,
	-25465,
	-25101,
	-24730,
	-24351,
	-23964,
	-23571,
	-23170,
	-22762,
	-22347,
	-21926,
	-21497,
	-21062,
	-20621,
	-20173,
	-19720,
	-19260,
	-18794,
	-18323,
	-17846,
	-17364,
	-16876,
	-16384,
	-15886,
	-15383,
	-14876,
	-14364,
	-13848,
	-13327,
	-12803,
	-12275,
	-11743,
	-11207,
	-10668,
	-10125,
	-9580,
	-9032,
	-8480,
	-7927,
	-7371,
	-6812,
	-6252,
	-5690,
	-5126,
	-4560,
	-3993,
	-3425,
	-2855,
	-2285,
	-1714,
	-1143,
	-571,
	0,
	571,
	1143,
	1714,
	2285,
	2855,
	3425,
	3993,
	4560,
	5126,
	5690,
	6252,
	6812,
	7371,
	7927,
	8480,
	9032,
	9580,
	10125,
	10668,
	11207,
	11743,
	12275,
	12803,
	13327,
	13848,
	14364,
	14876,
	15383,
	15886,
	16384,
	16876,
	17364,
	17846,
	18323,
	18794,
	19260,
	19720,
	20173,
	20621,
	21062,
	21497,
	21926,
	22347,
	22762,
	23170,
	23571,
	23964,
	24351,
	24730,
	25101,
	25465,
	25821,
	26169,
	26509,
	26841,
	27165,
	27481,
	27788,
	28087,
	28377,
	28659,
	28932,
	29196,
	29451,
	29697,
	29935,
	30163,
	30381,
	30591,
	30791,
	30982,
	31164,
	31336,
	31498,
	31651,
	31794,
	31928,
	32051,
	32165,
	32270,
	32364,
	32449,
	32523,
	32588,
	32643,
	32688,
	32723,
	32748,
	32763
};

int cr_rand(int lower, int upper) {
	return lower + rand() / (0x7fff / (upper - lower + 1) + 1);
}

/*
** END OF FILE
*/
